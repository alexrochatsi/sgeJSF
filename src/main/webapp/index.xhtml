<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="principal.xhtml">
        <ui:define name="dadosBanco">
            <f:metadata>
                <f:event type="preRenderView" listener="#{loginBean.loadModel}" />
            </f:metadata>
        </ui:define>
        <ui:define name="titulo">Início</ui:define>
        <ui:define name="content">
            <h:panelGrid columns="4" class="panelInicio" cellpadding="10" style="margin-left: 26%; margin-top: 45px">
                <p:commandButton value="Login" type="submit" onclick="PF('dlg1').show();" styleClass="botoesInicio" />
                <p:commandButton value="Cadastrar Aluno" type="submit" onclick="PF('dlg2').show();" styleClass="botoesInicio"/>
                <p:commandButton value="Cadastrar Empresa" type="submit" onclick="PF('dlg3').show();" styleClass="botoesInicio" />
                <p:commandButton value="Cadastrar Prof. Orientador" type="submit" onclick="PF('dlg4').show();" styleClass="botoesInicio" />
            </h:panelGrid>

            <p:dialog header="Login" widgetVar="dlg1" minHeight="40" showEffect="explode" hideEffect="bounce">
                <h:form id="form_login">
                    <p:growl id="message" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelLogin" columnClasses="label, value" style="text-align: left;" 
                                 styleClass="cadastros">

                        <p:outputLabel for="usuario" value="Usuário: " />
                        <p:inputText id="usuario" value="#{loginBean.login.usuario}"
                                     required="true" requiredMessage="Informe um usuário"/>

                        <p:outputLabel for="senha" value="Senha: " />
                        <p:password id="senha" value="#{loginBean.login.senha}" label="Senha"
                                    required="true" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.entrar()}" value="Entrar" update="message"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            <p:dialog header="Cadastro Login do Aluno" widgetVar="dlg2" minHeight="40"
                      showEffect="explode" hideEffect="bounce">
                <h:form id="form_cadastro">
                    <p:growl id="message1" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelCadastro" columnClasses="label, value" style="text-align: left;" styleClass="cadastros">
                        <p:outputLabel for="cpf" value="CPF: " />
                        <p:inputText id="cpf" value="#{loginBean.cadastro.usuario}"
                                     required="true" requiredMessage="Informe um usuário"/>

                        <p:outputLabel for="senha1" value="Senha: " />
                        <p:password id="senha1" value="#{loginBean.cadastro.senha}" label="Senha"
                                    required="true" match="senha2" requiredMessage="Informe uma senha"
                                    validatorMessage="Os campos 'Senha' não são iguais" />

                        <p:outputLabel for="senha2" value="Confirmar senha: " />
                        <p:password id="senha2" value="#{loginBean.cadastro.senha}" label="Confirmar senha"
                                    required="true" match="senha2" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.salvarAluno()}" value="Salvar" update="message1"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            
            <p:dialog header="Cadastro Login Empresa" widgetVar="dlg3" minHeight="40"
                      showEffect="explode" hideEffect="bounce">
                <h:form id="form_cadastro_aluno">
                    <p:growl id="message2" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelCadastro" columnClasses="label, value" style="text-align: left;" styleClass="cadastros">
                        <p:outputLabel for="cnpj" value="CNPJ: " />
                        <p:inputText id="cnpj" value="#{loginBean.cadastro.usuario}"
                                     required="true" requiredMessage="Informe um usuário"/>

                        <p:outputLabel for="senha3" value="Senha: " />
                        <p:password id="senha3" value="#{loginBean.cadastro.senha}" label="Senha"
                                    required="true" match="senha4" requiredMessage="Informe uma senha"
                                    validatorMessage="Os campos 'Senha' não são iguais" />

                        <p:outputLabel for="senha4" value="Confirmar senha: " />
                        <p:password id="senha4" value="#{loginBean.cadastro.senha}" label="Confirmar senha"
                                    required="true" match="senha4" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.salvarEmpresa()}" value="Salvar" update="message2"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            
            <p:dialog header="Cadastro Login Prof. Orientador" widgetVar="dlg4" minHeight="40"
                      showEffect="explode" hideEffect="bounce">
                <h:form id="form_cadastro_orientador">
                    <p:growl id="message3" sticky="false" showDetail="false" life="4000"/>
                    <p:panelGrid columns="2" id="panelCadastro" columnClasses="label, value" style="text-align: left;" styleClass="cadastros">
                        <p:outputLabel for="cpf1" value="CPF: " />
                        <p:inputText id="cpf1" value="#{loginBean.cadastro.usuario}"
                                     required="true" requiredMessage="Informe a matrícula"/>

                        <p:outputLabel for="senha5" value="Senha: " />
                        <p:password id="senha5" value="#{loginBean.cadastro.senha}" label="Senha"
                                    required="true" match="senha6" requiredMessage="Informe uma senha"
                                    validatorMessage="Os campos 'Senha' não são iguais" />

                        <p:outputLabel for="senha6" value="Confirmar senha: " />
                        <p:password id="senha6" value="#{loginBean.cadastro.senha}" label="Confirmar senha"
                                    required="true" match="senha6" requiredMessage="Informe uma senha"/>
                        <center>
                            <p:commandButton action="#{loginBean.salvarProfOrientador()}" value="Salvar" update="message3"/>
                        </center>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
            
        </ui:define>
    </ui:composition>
</html>